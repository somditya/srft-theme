<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Accessible A11y Slider</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/a11y-slider@latest/dist/a11y-slider.css"
    />

    <style>
      .a11y-slider-container {
        width: 90%;
        max-width: 100%;
        margin: 0 auto;
        position: relative; /* This is crucial for positioning the buttons */
      }

      .slider {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        box-sizing: border-box;
      }

      .slider li {
        width: 25%;
        flex: 0 0 auto;
        box-sizing: border-box;
        padding: 10px;
        text-align: center;
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        font-family: sans-serif;
        font-size: 1.5rem;
      }

      /* 1) Make the slider container a positioning context */
      .a11y-slider-container {
        position: relative;
      }

      /* 2) Reset & style the generated prev/next buttons */
      .a11y-slider-container > button.a11y-slider-prev,
      .a11y-slider-container > button.a11y-slider-next {
        all: unset; /* nuke the theme's global button styles */
        position: absolute;
        top: 8px;
        z-index: 10;

        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        border-radius: 9999px;

        background: #fff !important; /* override theme */
        border: 1px solid #ccc !important; /* override theme */
        color: #333 !important; /* override theme */
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        cursor: pointer;

        /* Visually hide the text ("Previous slide"/"Next slide") but keep it for SR */
        font-size: 0;
      }

      /* 3) Pin to corners */
      .a11y-slider-container > button.a11y-slider-prev {
        left: 8px;
      }
      .a11y-slider-container > button.a11y-slider-next {
        right: 8px;
      }

      /* 4) Arrow symbols as visible icons */
      .a11y-slider-container > button.a11y-slider-prev::before {
        content: "←";
        font-size: 22px;
        line-height: 1;
      }
      .a11y-slider-container > button.a11y-slider-next::before {
        content: "→";
        font-size: 22px;
        line-height: 1;
      }

      /* 5) Focus styles (keyboard accessibility) */
      .a11y-slider-container > button.a11y-slider-prev:focus-visible,
      .a11y-slider-container > button.a11y-slider-next:focus-visible {
        outline: 3px solid #66afe9;
        outline-offset: 2px;
      }

      /* Styling to position the navigation buttons on the left and right */
    </style>
  </head>
  <body>
    <div class="a11y-slider-container">
      <ul class="slider">
        <li>Slide 1</li>
        <li>Slide 2</li>
        <li>Slide 3</li>
        <li>Slide 4</li>
        <li>Slide 5</li>
        <li>Slide 6</li>
        <li>Slide 7</li>
        <li>Slide 8</li>
      </ul>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/a11y-slider@latest/dist/a11y-slider.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const container = document.querySelector(".a11y-slider-container");
        if (!container) return;

        // Ensure positioning context
        container.style.setProperty("position", "relative", "important");

        const prev = container.querySelector("button.a11y-slider-prev");
        const next = container.querySelector("button.a11y-slider-next");

        const styleBtn = (btn, side) => {
          if (!btn) return;

          // Kill theme styles and apply our own with inline !important
          const S = (prop, val) =>
            btn.style.setProperty(prop, val, "important");
          S("position", "absolute");
          S("top", "8px");
          S("zIndex", "10");
          S("display", "inline-flex");
          S("alignItems", "center");
          S("justifyContent", "center");
          S("width", "44px");
          S("height", "44px");
          S("padding", "0");
          S("margin", "0");
          S("borderRadius", "9999px");
          S("background", "#fff");
          S("border", "1px solid #ccc");
          S("color", "#333");
          S("boxShadow", "0 2px 6px rgba(0,0,0,.08)");
          S("cursor", "pointer");
          S("lineHeight", "1");
          S("letterSpacing", "normal");
          S("textTransform", "none");
          S(side, "8px"); // 'left' for prev, 'right' for next

          // Accessible name
          btn.setAttribute(
            "aria-label",
            side === "left" ? "Previous slide" : "Next slide"
          );

          // Replace text with an SVG arrow
          btn.textContent = ""; // remove "Previous slide"/"Next slide"
          const svgNS = "http://www.w3.org/2000/svg";
          const svg = document.createElementNS(svgNS, "svg");
          svg.setAttribute("viewBox", "0 0 24 24");
          svg.setAttribute("width", "22");
          svg.setAttribute("height", "22");
          const path = document.createElementNS(svgNS, "path");
          path.setAttribute("fill", "none");
          path.setAttribute("stroke", "currentColor");
          path.setAttribute("stroke-width", "2");
          path.setAttribute("stroke-linecap", "round");
          path.setAttribute("stroke-linejoin", "round");
          path.setAttribute(
            "d",
            side === "left" ? "M15.5 4.5l-7 7 7 7" : "M8.5 4.5l7 7-7 7"
          );
          svg.appendChild(path);
          btn.appendChild(svg);

          // Focus ring
          btn.addEventListener("focus", () => {
            btn.style.setProperty("outline", "3px solid #66afe9", "important");
            btn.style.setProperty("outlineOffset", "2px", "important");
          });
          btn.addEventListener("blur", () => {
            btn.style.removeProperty("outline");
            btn.style.removeProperty("outline-offset");
          });
        };

        styleBtn(prev, "left");
        styleBtn(next, "right");

        // Re-hide the "skip slider" control in case the theme broke it
        const srOnly = container.querySelector(".a11y-slider-sr-only");
        if (srOnly && srOnly !== prev && srOnly !== next) {
          const S = (prop, val) =>
            srOnly.style.setProperty(prop, val, "important");
          S("position", "absolute");
          S("width", "1px");
          S("height", "1px");
          S("padding", "0");
          S("margin", "-1px");
          S("overflow", "hidden");
          S("clip", "rect(0 0 0 0)");
          S("clip-path", "inset(50%)");
          S("whiteSpace", "nowrap");
          S("border", "0");
        }
      });
    </script>
  </body>
</html>
